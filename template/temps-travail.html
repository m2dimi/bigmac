<div class="row header">
    <div class="col-xs-3">
        <a href="#/home"><img class="logo_mini" src="ressources/logo_min.png"></a>
    </div>
</div>

    <div class="row">
        <div class="col-xs-12 col-md-5">
                <img class="img-responsive pull_left img_perso_mach"  src="{{countryselection1}}" />
                <img id="img_machine1" class="img-responsive center-block img_machine"  src="ressources/machine/machine_repos.jpg" />
                <img id="img_camion1" class="img-responsive"  src="ressources/machine/camion.png" />
                <span id="nbr_bigmac1" class="font_courgette">x{{totalbigmac1}}</span>
            <!--<span>{{worktimeselection1}}</span>-->

        </div>
        <div class="col-xs-12 col-md-2">
                <div class="fond_round"></div>
                <input id="time" type="text" name="round" class="round" data-min="1" data-max="24" value="10"/>
                <span id="text_hour" class="font_nexar">Heures</span>
                <a id="btn_act"  ng-click="bigmac_calcul()"><img  id="interupt" class="img-responsive center-block" src="ressources/machine/off.png"/> </a>
                <img id="poteau" class="img-responsive hidden-xs" src="ressources/machine/poteau.png">
                <a id="btn_suivant_worktime" class="btn_next font_rustsla" href="#/comparatif/home/{{countryA}}/{{countryB}}"><strong>Suivant</strong></a>

        </div>
        <div class="col-xs-12 col-md-5">
            <img id="img2" class="img-responsive pull-right img_perso_mach"  src="{{countryselection2}}" />
            <img id="img_machine2" class="img-responsive center-block img_machine"  src="ressources/machine/machine_repos2.jpg" />
            <img id="img_camion2" class="img-responsive"  src="ressources/machine/camion2.png" />
            <span id="nbr_bigmac2" class="font_courgette">x{{totalbigmac2}}</span>
        </div>
    </div>

<div class="modal fade" id="start">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <div class="row">
                    <div class="col-xs-12">
                        <div class="text-center font_courgette  font_30">Selectionne une durée de travail, <span class="orange">et lance les machines pour comparer suivant les pays, combien de Big Mac tu peux acheter</span>*</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-4">
                        <img id="horloge_gif" class="img-responsive" src="ressources/popup/horloge.gif"/>
                    </div>
                    <div class="col-xs-4">
                        <img id="interupt_gif" class="img-responsive center-block" src="ressources/popup/interupt.gif" style="margin-top: 45%; width: 63%"/>
                    </div>
                    <div class="col-xs-4">
                        <img class="img-responsive" src="ressources/popup/camion.png" style="margin-top: 65%;"/>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <div class="text-center font_courgette font_30">*« Ainsi tu pourras comparer, grâce à l’indice Big Mac le pouvoir d’achat de deux pays»</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12 text-center">
                        <h2> <a href="#" class="btn_next font_rustsla" data-dismiss="modal">Start</a></h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    window.onload
    {
        $('#start').modal('show');
        setInterval(gif_popup,3000);

    }

    function gif_popup ()
    {
        var tmp = new Date();
        var img1 = $("#horloge_gif")[0];
        var img2 = $("#interupt_gif")[0];
        img1.src = "ressources/popup/horloge.gif" + '?' + tmp.getTime();
        img2.src = "ressources/popup/interupt.gif" + '?' + tmp.getTime();

    }



    (function($){
        $('input.round').wrap('<div class="round" />').each(function(){
            var $input = $(this);
            var $div = $input.parent();
            var min = $input.data('min');
            var max = $input.data('max');
            var ratio = ($input.val() - min) / (max - min);


            var $circle = $('<canvas width="200px" height="200px"/>' );
            var $color = $('<canvas width="200px" height="200px"/>' );
            $div.append($circle);
            $div.append($color);
            var ctx = $circle[0].getContext('2d');

            ctx.beginPath();
            ctx.arc(100,100,85,0,2*Math.PI);
            ctx.lineWidth = 30;
            ctx.strokeStyle = "#FDD784"
            ctx.stroke();

            var ctx = $color[0].getContext('2d');
            ctx.beginPath();
            ctx.arc(100,100,85,-1/2*Math.PI,ratio*2*Math.PI - 1/2 * Math.PI);
            ctx.lineWidth = 30;
            ctx.strokeStyle = "#C22E38"
            ctx.stroke();

            $div.mousedown(function(event){
                event.preventDefault();
                $div.bind('mousemove', function(event){
                    var x = event.pageX - $div.offset().left - $div.width()/2;
                    var y = event.pageY - $div.offset().top - $div.height()/2;
                    var a = Math.atan2(x,-y) / (2*Math.PI);
                    if (a < 0) { a+=1; };
                    ctx.clearRect(0,0,200,200);
                    ctx.beginPath();
                    ctx.arc(100,100,85,-1/2*Math.PI,a*2*Math.PI -1/2*Math.PI);
                    ctx.lineWidth = 30;
                    ctx.strokeStyle = "#C22E38"
                    ctx.stroke();
                    $input.val(Math.round(a * (max - min) + min));
                })
            }).mouseup(function(event){
                event.preventDefault();
                $div.unbind('mousemove');
            })
        })
    })(jQuery)

</script>